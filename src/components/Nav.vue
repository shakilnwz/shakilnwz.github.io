<script setup>
import NavLink from "./NavLink.vue"

const themeSwitch = {
    'd-sun' : 'M11.296.039a.506.506 0 0 1 .3.371l.622 3.372 3.371.619a.505.505 0 0 1 .372.3.496.496 0 0 1-.05.474L13.965 8l1.946 2.822c.097.14.116.318.05.474a.505.505 0 0 1-.372.3l-3.37.622-.623 3.371a.505.505 0 0 1-.3.372.496.496 0 0 1-.474-.05L8 13.965 5.179 15.91a.496.496 0 0 1-.475.05.505.505 0 0 1-.3-.372l-.622-3.37-3.372-.623a.506.506 0 0 1-.371-.3.496.496 0 0 1 .05-.474L2.035 8 .09 5.179a.496.496 0 0 1-.05-.475.505.505 0 0 1 .371-.3l3.372-.622L4.404.41a.505.505 0 0 1 .3-.371.496.496 0 0 1 .475.05L8 2.035 10.822.09a.496.496 0 0 1 .474-.05ZM5.001 8A3 3 0 1 1 11 8a3 3 0 0 1-6 0Zm3-4a4 4 0 1 1 0 8 4 4 0 0 1 0-8Z',
    'd-moon' : 'M11.621.09C5.556.09.646 5.017.646 11.09c0 6.075 4.91 11 10.975 11 2.976 0 5.672-1.188 7.651-3.113a.785.785 0 0 0-.682-1.335 8.616 8.616 0 0 1-1.479.127c-4.758 0-8.618-3.87-8.618-8.642a8.64 8.64 0 0 1 4.385-7.529.785.785 0 0 0-.324-1.463c-.31-.025-.619-.04-.933-.04V.092Z'
}

let switchIcon = themeSwitch['d-moon'];

const applyTheme = (theme) =>{
    document.body.classList.toggle('dark', theme === 'dark');
    localStorage.setItem('theme', theme);
}

const savedTheme = localStorage.getItem('theme');
savedTheme ? applyTheme(savedTheme) : window.matchMedia('(prefers-color-scheme: dark)').matches ? applyTheme('dark') : applyTheme('light')

const toggleTheme = ()=>{
    const currentTheme = document.body.classList.contains('dark') ? 'dark' : 'light';
    const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
    applyTheme(newTheme); 
}


</script>

<template>
    <nav>
        <div class="max-w-5xl mx-auto px-5 flex flex-row items-center justify-between sm:px-8 py-2.5 sm:py-5 gap-2">
            <!-- logo -->
            <a class="block" href="/">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-10" viewBox="0 0 45 40">
                    <g class="fill-current" fill-rule="evenodd">
                        <path class="text-brand-x" d="M0 0h16.548L45 18.912 28.216 40H15.782l15.32-18.854L0 0Z"/>
                        <path class="text-brand-y" d="M22.979 0h10.486L10.789 40H0L22.979 0Z"/>
                    </g>
                </svg>
            </a>

            <!-- tab -->
            <div class="bg-surface fixed bottom-0 left-0 right-0 sm:relative sm:rounded-xl overflow-hidden shadow-[0_-1px_10px_rgba(0,0,0,0.4)] sm:shadow-[0_1px_5px_rgba(0,0,0,0.25)] ">
                <ul class="flex flex-row *:grow *:basis-1 *:not-last:border-r *:not-last:border-r-brand-y">
                    <li>
                        <NavLink 
                            href="/about"
                            svgd="M12 3.514c0 1.94-1.79 3.514-4 3.514S4 5.454 4 3.514C4 1.574 5.79 0 8 0s4 1.573 4 3.514ZM0 13.122c0-2.912 2.85-5.271 6.368-5.271h3.264C13.15 7.85 16 10.21 16 13.122c0 .485-.475.878-1.06.878H1.06C.476 14 0 13.607 0 13.122Z"
                            text="About"
                        />
                    </li>
                    <li>
                        <NavLink 
                            href="/articles" 
                            svgd="M5.5 0c-1.103 0-2 .897-2 2v9.5c0 .275-.225.5-.5.5a.501.501 0 0 1-.5-.5V3a.999.999 0 1 0-2 0v8.5A2.5 2.5 0 0 0 3 14h11.5c1.103 0 2-.897 2-2V2c0-1.103-.897-2-2-2h-9Zm0 5.25v-2.5c0-.416.334-.75.75-.75h3.5c.416 0 .75.334.75.75v2.5c0 .416-.334.75-.75.75h-3.5a.748.748 0 0 1-.75-.75ZM12 2.5c0 .275.225.5.5.5H14c.275 0 .5-.225.5-.5S14.275 2 14 2h-1.5c-.275 0-.5.225-.5.5Zm.5 3.5a.501.501 0 0 1-.5-.5c0-.275.225-.5.5-.5H14c.275 0 .5.225.5.5s-.225.5-.5.5h-1.5Zm-7 2.5c0 .275.225.5.5.5h8c.275 0 .5-.225.5-.5S14.275 8 14 8H6c-.275 0-.5.225-.5.5ZM6 12a.501.501 0 0 1-.5-.5c0-.275.225-.5.5-.5h8c.275 0 .5.225.5.5s-.225.5-.5.5H6Z"
                            text="Articles" 
                        />
                    </li>
                    <li>
                        <NavLink 
                            href="/projects"
                            svgd="M0 1.5C0 .672.597 0 1.333 0H4c.736 0 1.333.672 1.333 1.5V2h5.334v-.5c0-.828.597-1.5 1.333-1.5h2.667C15.403 0 16 .672 16 1.5v3c0 .828-.597 1.5-1.333 1.5H12c-.736 0-1.333-.672-1.333-1.5V4H5.333v.5c0 .053-.002.106-.008.156L7.555 8h2.667c.736 0 1.334.672 1.334 1.5v3c0 .828-.598 1.5-1.334 1.5H7.556c-.737 0-1.334-.672-1.334-1.5v-3c0-.053.003-.106.009-.156L4 6H1.333C.597 6 0 5.328 0 4.5v-3Z"
                            text="Projects"
                        />
                    </li>
                    <li>
                        <NavLink 
                            href="/contact"
                            svgd="M.5 2c0-1.103.797-2 1.778-2h12.444c.98 0 1.778.897 1.778 2v10c0 1.103-.797 2-1.778 2H2.278C1.298 14 .5 13.103.5 12V2Zm5.778 6H4.5c-1.228 0-2.222 1.119-2.222 2.5 0 .275.2.5.444.5h5.334c.244 0 .444-.225.444-.5C8.5 9.119 7.506 8 6.278 8ZM3.61 5c0-1.105.796-2 1.778-2s1.778.895 1.778 2c0 1.104-.796 2-1.778 2s-1.778-.896-1.778-2Zm10.667-1h-3.556c-.244 0-.444.225-.444.5s.2.5.444.5h3.556c.244 0 .444-.225.444-.5s-.2-.5-.444-.5Zm-3.556 2h3.556c.244 0 .444.225.444.5s-.2.5-.444.5h-3.556c-.244 0-.444-.225-.444-.5s.2-.5.444-.5Zm3.556 2h-3.556c-.244 0-.444.225-.444.5s.2.5.444.5h3.556c.244 0 .444-.225.444-.5s-.2-.5-.444-.5Z"
                            text="Contact"
                        />
                    </li>
                </ul>

            </div>

            <!-- quicklinks -->
            <div class="flex flex-row gap-4">

                <a  class="hover:text-brand-y" href="https://github.com/shakilnwz" target="_blank">
                    <svg class="h-5" xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 23 22">
                        <path
                            class="fill-current"
                            fill-rule="evenodd"
                            d="M.436 11.1C.436 4.79 5.263 0 11.573 0 17.883 0 23 4.79 23 11.1c0 5.045-3.084 9.362-7.633 10.872-.578.105-.787-.254-.787-.55l.003-.8c.004-.787.01-1.977.01-3.003 0-1.07-.355-1.752-.773-2.111 2.543-.287 5.222-.637 5.222-5.027 0-1.246-.446-1.874-1.173-2.68.118-.295.505-1.51-.119-3.088-.95-.3-3.139 1.228-3.139 1.228a10.688 10.688 0 0 0-2.856-.386c-.97 0-1.947.131-2.857.386 0 0-2.188-1.524-3.14-1.228-.622 1.574-.236 2.793-.117 3.089-.728.8-1.074 1.428-1.074 2.68 0 4.376 2.566 4.744 5.109 5.026-.328.3-.624.805-.728 1.533-.65.3-2.32.805-3.317-.95-.623-1.083-1.756-1.174-1.756-1.174-1.114-.014-.072.7-.072.7.746.341 1.264 1.665 1.264 1.665.669 2.038 3.853 1.356 3.853 1.356 0 .618.006 1.487.01 2.1v.004l.004.689c0 .296-.205.655-.787.55C3.612 20.463.437 16.145.437 11.1Zm6.328 6.633c-.136-.027-.227-.132-.195-.223s.163-.137.282-.105c.136.041.223.146.195.237-.027.09-.163.136-.282.09Zm.983.145c.132 0 .236-.073.236-.164 0-.104-.118-.177-.254-.164-.132 0-.237.073-.237.164 0 .105.105.178.255.164Zm.832-.446c-.132.032-.223.119-.209.223.014.091.132.15.269.118.131-.032.222-.118.209-.209-.014-.086-.137-.145-.269-.132ZM4.86 15.69c-.06.046-.046.15.031.237.073.072.177.104.237.045.059-.045.045-.15-.032-.236-.073-.073-.178-.105-.237-.046ZM4.47 15.5c-.09-.046-.136-.118-.104-.178.032-.045.104-.059.195-.031.091.045.137.118.105.177-.032.064-.123.077-.196.032Zm1.37 1.442c-.073.059-.046.196.059.282.104.105.236.118.295.045.06-.059.032-.195-.059-.282-.1-.104-.236-.118-.296-.045Zm-.52-.4c-.072-.105-.072-.223 0-.269.074-.059.192-.013.256.091.072.105.072.223 0 .282-.06.046-.182 0-.255-.104Z"
                            clip-rule="evenodd"
                        />
                    </svg>
                </a>

                <!-- theme toggle -->
                <div class="cursor-pointer hover:text-brand-y" @click="toggleTheme()">
                    <svg class="h-5" xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 22 22">
                        <path
                            class="fill-current"
                            fill-rule="evenodd"
                            :d="switchIcon" 
                            clip-rule="evenodd"
                        />
                    </svg>
                </div>
            </div>
        </div>
    </nav>
</template>

